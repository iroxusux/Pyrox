#!/bin/sh
# Pre-commit hook to check version increment and sync README badges

# First, check if version needs to be incremented
echo "ğŸ” Checking version increment requirement..."
python utils/check_version_increment.py
if [ $? -ne 0 ]; then
    echo "âŒ Pre-commit hook failed: Version check failed"
    exit 1
fi

# If version check passes, sync README badges
echo "ğŸ“ Syncing README badges from pyproject.toml..."
python utils/sync_readme.py

# Add the updated README.md to the commit if it was changed
echo "ğŸ“ Updating README.md in git commit..."
git add README.md

echo "âœ… Pre-commit checks passed!"